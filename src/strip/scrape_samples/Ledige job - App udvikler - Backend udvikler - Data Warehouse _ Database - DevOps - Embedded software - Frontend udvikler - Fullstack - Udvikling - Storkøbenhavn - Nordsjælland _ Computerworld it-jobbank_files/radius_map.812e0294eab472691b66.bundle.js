"use strict";(self.webpackChunkjix=self.webpackChunkjix||[]).push([[4400],{80427:(e,t,r)=>{var o=r(65311),n=r.n(o),i=r(6228);const a=window.JIX=window.JIX||{};function radius_map_update(){const e=n()("#radius_map");if(0===e.length)return;const t=e.data("radius"),r=e.data("latitude")/1,o=e.data("longitude")/1;new i.Z({container:e[0]}).updatePoint([o,r],t)}a.Jobsearch=a.Jobsearch||{},a.Jobsearch.RadiusMap={},n()((()=>{radius_map_update(),n()(document).on("reloaded.jix.jobsearch",(()=>{radius_map_update()}))}))},2784:(e,t,r)=>{r.d(t,{Z:()=>ApiConflictError});var o=r(12369);class ApiConflictError extends o.Z{constructor(e,t,r,o=`API conflict error: ${e} ${t} [${r.status}]`){super(e,t,r,o),this.error=r.responseJSON.errors[0].error_message,this.extraData=r.responseJSON.extra_data}}},2871:(e,t,r)=>{r.d(t,{Z:()=>ApiValidationError});var o=r(12369);class ApiValidationError extends o.Z{constructor(e,t,r,o=`API request failed validation: ${e} ${t} [${r.status}]`){super(e,t,r,o),this.errors=r.responseJSON.errors,this.warnings=r.responseJSON.warnings}}},12369:(e,t,r)=>{r.d(t,{Z:()=>RequestError});class RequestError extends Error{constructor(e,t,r,o=`Request failed: ${e} ${t} [${r.status}]`){super(o),this.method=e,this.url=t,this.status=r.status,this.readyState=r.readyState,this.text=r.responseText,this.json=r.responseJSON}}},6082:(e,t,r)=>{r.d(t,{ZP:()=>DefaultMap,B8:()=>handleWebGlError,T:()=>isWebGlError});var o=r(17082),n=r.n(o);const i=["airport-label","country_label","country_label-other","place-islands","place_label_city_big","place_label_city_town_medium","place_label_other","place_village_suburb","poi_major","poi_minor","poi_railway","road_major_label","water_label","waterway-label"];class DetectLanguage{constructor(){this._onStyleData=this._onStyleData.bind(this)}onAdd(e){return this.map=e,this.map.on("styledata",this._onStyleData),this._container=document.createElement("div"),this._container}onRemove(){this.map.off("styledata",this._onStyleData)}_onStyleData(){this.map.off("styledata",this._onStyleData);const e=document.documentElement.lang.substr(0,2);if(e){const t=["coalesce",["get","name:"+e],["get","name"]];for(let e of i)this.map.setLayoutProperty(e,"text-field",t)}}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class DefaultMap extends n().Map{constructor(e){const t={};for(let r of Object.keys(t))void 0!==e[r]&&(t[r]=e[r],delete e[r]);super(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({style:"/api/map/style/standard",dragRotate:!1},e)),this.touchZoomRotate.disableRotation(),this.addControl(new(n().NavigationControl)({showCompass:!1})),this.addControl(new(n().FullscreenControl)),this.addControl(new DetectLanguage),setTimeout((()=>{const e=this.getContainer().querySelector(".maplibregl-ctrl-attrib");e&&e.classList.contains("maplibregl-compact-show")&&(e.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),e.removeAttribute("open"))}),5e3)}}function isWebGlError(e){return/Failed to initialize WebGL/.test(e.message)}function handleWebGlError(e,t){if(!isWebGlError(e))throw e;{const e=document.createElement("div");e.textContent="WebGL not supported",e.style.textAlign="center",e.style.background="#ccc",document.getElementById(t).appendChild(e)}}},6228:(e,t,r)=>{r.d(t,{Z:()=>RadiusMap});var o=r(65052),n=r(1449),i=r(6082),a=r(922),s=r(5939);class InvalidAddressError extends Error{constructor(e){super(`Invalid address: ${e}`),this.name="InvalidAddressError",this.address=e}}class RadiusMap extends i.ZP{constructor(e){super(e),this.on("load",this._onMapLoaded.bind(this))}updatePoint(e,t){this._center=e,this._radius=t,this._updateData(),this.refitBounds()}updateRadius(e){this.updatePoint(this._center,e)}updateAddress(e,t){this._address===e?this.updateRadius(t):(this._address=e,function geocode(e){const t="/api/geo/v1/validate-address?address="+encodeURIComponent(e);return(0,a.hi)("GET",t).then((t=>{if(!t.results.valid)throw new InvalidAddressError(e);return t.results.pos}))}(e).then((({lng:e,lat:r})=>this.updatePoint([e,r],t))).catch((e=>{this.removeMarker(),console.error(e),e instanceof InvalidAddressError||window.Sentry.captureException(e)})))}refitBounds(e=!1){if(this._circleFeature){const t=(0,s.t)(this._circleFeature);this.fitBounds(t,{padding:{top:20,left:20,bottom:20,right:50},animate:e})}}removeMarker(){this._circleFeature=null,this._address=null,this._center=null,this._radius=null,this._updateData()}_onMapLoaded(){const e=(0,s.k)(this);this.addSource("radius",{type:"geojson",data:(0,n.uf)([])}),function getLayers(e){return[{id:"radius_circle",type:"fill",source:"radius",filter:["==","$type","Polygon"],paint:{"fill-opacity":.4,"fill-color":e.radius_circle}},{id:"radius_outline",type:"line",source:"radius",filter:["==","$type","Polygon"],paint:{"line-width":1,"line-color":e.radius_circle}},{id:"radius_center",type:"circle",source:"radius",filter:["==","$type","Point"],paint:{"circle-radius":3,"circle-opacity":1,"circle-stroke-color":"#fff","circle-stroke-width":1}}]}(e).forEach((e=>this.addLayer(e,"poi_major"))),this.setLayoutProperty("highway_shield","visibility","none"),this._updateData(),this.refitBounds()}_updateData(){let e;try{e=this.getSource("radius")}catch(t){return}if(e){const t=[];this._center&&this._radius&&(this._circleFeature=(0,o.Z)(this._center,this._radius),t.push(this._circleFeature)),this._center&&t.push((0,n.xm)(this._center)),e.setData((0,n.uf)(t))}}}},5939:(e,t,r)=>{r.d(t,{k:()=>getMapColors,t:()=>featureBounds});var o=r(17082),n=r(39034),i=r(1449);function featureBounds(e){Array.isArray(e)&&(e=(0,i.uf)(e));const t=new o.LngLatBounds;return(0,n.pZ)(e,(e=>t.extend(e))),t}function getMapColors(e){const t=getComputedStyle(e.getContainer()),getCssColor=e=>t.getPropertyValue(`--${e}`);return{country:getCssColor("map-marker-country-color"),region:getCssColor("map-marker-region-color"),municipality:getCssColor("map-marker-municipality-color"),zipcode:getCssColor("map-marker-zipcode-color"),fallback:getCssColor("map-marker-fallback-color"),cluster:getCssColor("map-marker-cluster-color"),selected:getCssColor("map-marker-selected-color"),address_count:getCssColor("map-marker-address-count-color"),radius_circle:getCssColor("map-marker-radius-circle-color")}}},922:(e,t,r)=>{r.d(t,{Bk:()=>concatName,Dk:()=>setDocumentTitle,HT:()=>compareResponsiveBreakpoint,JB:()=>getNumberFormatter,Kd:()=>getLocale,LQ:()=>u,Nb:()=>uniqueArray,QM:()=>formatByteSize,Sy:()=>shuffleArray,Vt:()=>stripHtml,WU:()=>format,ZO:()=>getResponsiveBreakpoint,aS:()=>truncateString,hi:()=>api,ks:()=>getCurrencyFormatter});var o=r(65311),n=r.n(o),i=r(53495),a=r(12369),s=r(2871),c=r(2784),l=r(60611);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function shuffleArray(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[r],e[r]=o}return e}function uniqueArray(e){return e.filter(((e,t,r)=>r.indexOf(e)===t))}function concatName({firstname:e,middlename:t,lastname:r}){return[e,t,r].join(" ").trim()}function format(e,t){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp("{"+r+"}","g"),t[r])),e)}function getCurrencyFormatter(e,t=getLocale()){return new Intl.NumberFormat(t,{style:"currency",currency:e,minimumFractionDigits:0})}function getNumberFormatter(e=getLocale()){return new Intl.NumberFormat(e)}function formatByteSize(e,t="MB",r="B"){let o={B:0,KB:1,MB:2,GB:3,TB:4},n=o[r]-o[t];return(e*Math.pow(1024,n)).toFixed(2)}function api(e,t,r={},o={}){const l=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:e,url:t,data:r,traditional:!0,headers:{}},o);return window.Stash&&window.Stash.common&&window.Stash.common.csrf_token&&(l.headers["X-CSRF-Token"]=window.Stash.common.csrf_token),(0,i.Z)(n().ajax(l)).catch((r=>{throw 422===r.status?new s.Z(e,t,r):409===r.status?new c.Z(e,t,r):new a.Z(e,t,r)}))}const u=["xs","sm","md","lg","xl"];function getResponsiveBreakpoint(){const e=window.innerWidth;return e>=1200?"xl":e>=992?"lg":e>=768?"md":e>=576?"sm":"xs"}function compareResponsiveBreakpoint(e){const t=u.indexOf(e);if(t<0)throw Error("Invalid breakpoint");const r=getResponsiveBreakpoint(),o=u.indexOf(r);return Math.sign(o-t)}function getLocale(e="en-GB"){return document.querySelector("html").getAttribute("lang")||e}function stripHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent}function truncateString(e,t,r="â€¦"){if(e.length<=t)return e;const o=t-r.length;return[...e].slice(0,o).join("")+r}function setDocumentTitle(e){if(e){let t=(0,l.unref)(e);t=Array.isArray(t)?t:[t],document.title=[...t,window.Stash.common.sitename].join(" | ")}else document.title=window.Stash.common.sitename}},53495:(e,t,r)=>{function toNativePromise(e){return new Promise(((t,r)=>{e.then(t,r)}))}r.d(t,{Z:()=>toNativePromise})},60611:(e,t,r)=>{r.r(t),r.d(t,{BaseTransition:()=>o.P$,BaseTransitionPropsValidators:()=>o.nJ,Comment:()=>o.sv,EffectScope:()=>o.Bj,Fragment:()=>o.HY,KeepAlive:()=>o.Ob,ReactiveEffect:()=>o.qq,Static:()=>o.qG,Suspense:()=>o.n4,Teleport:()=>o.lR,Text:()=>o.xv,Transition:()=>o.uT,TransitionGroup:()=>o.W3,VueElement:()=>o.a2,VueSentry:()=>a,assertNumber:()=>o.Wu,callWithAsyncErrorHandling:()=>o.$d,callWithErrorHandling:()=>o.KU,camelize:()=>o._A,capitalize:()=>o.kC,cloneVNode:()=>o.Ho,compatUtils:()=>o.ry,compile:()=>o.MY,computed:()=>o.Fl,createApp:()=>createApp,createBlock:()=>o.j4,createCommentVNode:()=>o.kq,createElementBlock:()=>o.iD,createElementVNode:()=>o._,createHydrationRenderer:()=>o.Eo,createPropsRestProxy:()=>o.p1,createRenderer:()=>o.Us,createSSRApp:()=>o.vr,createSlots:()=>o.Nv,createStaticVNode:()=>o.uE,createTextVNode:()=>o.Uk,createVNode:()=>o.Wm,customRef:()=>o.ZM,defineAsyncComponent:()=>o.RC,defineComponent:()=>o.aZ,defineCustomElement:()=>o.MW,defineEmits:()=>o.Bz,defineExpose:()=>o.WY,defineModel:()=>o.Gn,defineOptions:()=>o.Yu,defineProps:()=>o.yb,defineSSRCustomElement:()=>o.Ah,defineSlots:()=>o.Wl,devtools:()=>o.mW,effect:()=>o.cE,effectScope:()=>o.B,getCurrentInstance:()=>o.FN,getCurrentScope:()=>o.nZ,getTransitionRawChildren:()=>o.Q6,guardReactiveProps:()=>o.F4,h:()=>o.h,handleError:()=>o.S3,hasInjectionContext:()=>o.EM,hydrate:()=>o.ZB,initCustomFormatter:()=>o.Mr,initDirectivesForSSR:()=>o.Nd,inject:()=>o.f3,isMemoSame:()=>o.nQ,isProxy:()=>o.X3,isReactive:()=>o.PG,isReadonly:()=>o.$y,isRef:()=>o.dq,isRuntimeOnly:()=>o.of,isShallow:()=>o.yT,isVNode:()=>o.lA,markRaw:()=>o.Xl,mergeDefaults:()=>o.u_,mergeModels:()=>o.Vf,mergeProps:()=>o.dG,nextTick:()=>o.Y3,normalizeClass:()=>o.C_,normalizeProps:()=>o.vs,normalizeStyle:()=>o.j5,onActivated:()=>o.dl,onBeforeMount:()=>o.wF,onBeforeUnmount:()=>o.Jd,onBeforeUpdate:()=>o.Xn,onDeactivated:()=>o.se,onErrorCaptured:()=>o.d1,onMounted:()=>o.bv,onRenderTracked:()=>o.bT,onRenderTriggered:()=>o.Yq,onScopeDispose:()=>o.EB,onServerPrefetch:()=>o.vl,onUnmounted:()=>o.SK,onUpdated:()=>o.ic,openBlock:()=>o.wg,popScopeId:()=>o.Cn,provide:()=>o.JJ,proxyRefs:()=>o.WL,pushScopeId:()=>o.dD,queuePostFlushCb:()=>o.qb,reactive:()=>o.qj,readonly:()=>o.OT,ref:()=>o.iH,registerRuntimeCompiler:()=>o.Y1,render:()=>o.sY,renderList:()=>o.Ko,renderSlot:()=>o.WI,resolveComponent:()=>o.up,resolveDirective:()=>o.Q2,resolveDynamicComponent:()=>o.LL,resolveFilter:()=>o.eq,resolveTransitionHooks:()=>o.U2,setBlockTracking:()=>o.qZ,setDevtoolsHook:()=>o.ec,setTransitionHooks:()=>o.nK,shallowReactive:()=>o.Um,shallowReadonly:()=>o.YS,shallowRef:()=>o.XI,ssrContextKey:()=>o.Uc,ssrUtils:()=>o.G,stop:()=>o.sT,toDisplayString:()=>o.zw,toHandlerKey:()=>o.hR,toHandlers:()=>o.mx,toRaw:()=>o.IU,toRef:()=>o.Vh,toRefs:()=>o.BK,toValue:()=>o.Tn,transformVNodeArgs:()=>o.C3,triggerRef:()=>o.oR,unref:()=>o.SU,useAttrs:()=>o.l1,useCssModule:()=>o.fb,useCssVars:()=>o.sj,useModel:()=>o.tT,useSSRContext:()=>o.Zq,useSlots:()=>o.Rr,useTransitionState:()=>o.Y8,vModelCheckbox:()=>o.e8,vModelDynamic:()=>o.YZ,vModelRadio:()=>o.G2,vModelSelect:()=>o.bM,vModelText:()=>o.nr,vShow:()=>o.F8,version:()=>o.i8,warn:()=>o.ZK,watch:()=>o.YP,watchEffect:()=>o.m0,watchPostEffect:()=>o.Rh,watchSyncEffect:()=>o.yX,withAsyncContext:()=>o.mv,withCtx:()=>o.w5,withDefaults:()=>o.b9,withDirectives:()=>o.wy,withKeys:()=>o.D2,withMemo:()=>o.MX,withModifiers:()=>o.iM,withScopeId:()=>o.HX});var o=r(29812),n=r(77594),i=r(77444);const a={install(e){(0,i.W)(e,{logErrors:!0})}};function createApp(...e){return(0,n.ri)(...e).use(a)}},65311:e=>{e.exports=jQuery},17082:e=>{e.exports=maplibregl},65052:(e,t,r)=>{r.d(t,{Z:()=>n});var o=r(1449);function destination(e,t,r,n){void 0===n&&(n={});var i=function getCoord(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(e),a=(0,o.Ht)(i[0]),s=(0,o.Ht)(i[1]),c=(0,o.Ht)(r),l=(0,o.lF)(t,n.units),u=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(c)),d=a+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(u)),p=(0,o.vi)(d),m=(0,o.vi)(u);return(0,o.xm)([p,m],n.properties)}const n=function circle(e,t,r){void 0===r&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},a=[],s=0;s<n;s++)a.push(destination(e,t,-360*s/n,r).geometry.coordinates);return a.push(a[0]),(0,o.yu)([a],i)}}},e=>{e.O(0,[7444,9812,5032],(()=>{return t=80427,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=radius_map.812e0294eab472691b66.bundle.js.map